<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>–ë–ª–æ–∫–Ω–æ—Ç—ã –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ –≥–æ–¥</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #f5f7fa;
      color: #333;
      padding: 20px;
      line-height: 1.5;
    }

    h1 {
      text-align: center;
      margin-bottom: 20px;
      color: #2c3e50;
      font-weight: 700;
    }

    .blocks-container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(450px, 1fr));
      gap: 25px;
      max-width: 1800px;
      margin: 0 auto;
    }

    .notebook-block {
      background: white;
      border-radius: 12px;
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.08);
      overflow: hidden;
    }

    .block-header {
      background: linear-gradient(135deg, #3498db, #2980b9);
      color: white;
      padding: 16px 20px;
      font-size: 1.4rem;
      font-weight: 600;
    }

    .notebooks-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 12px;
      padding: 16px;
      background: #fafafa;
    }

    .notebook {
      background: white;
      border: 1px solid #e0e6ed;
      border-radius: 8px;
      min-height: 120px;
      padding: 12px;
      font-size: 0.95rem;
      outline: none;
      transition: all 0.2s ease;
      box-shadow: 0 2px 4px rgba(0,0,0,0.03);
      overflow-wrap: break-word;
    }

    .notebook:hover {
      border-color: #bdc3c7;
      box-shadow: 0 4px 8px rgba(0,0,0,0.05);
    }

    .notebook:focus {
      border-color: #3498db;
      box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2);
    }

    .notebook-placeholder::before {
      content: attr(data-placeholder);
      color: #95a5a6;
      pointer-events: none;
    }

    .controls {
      text-align: center;
      margin: 30px 0;
    }

    .btn {
      background: linear-gradient(135deg, #2ecc71, #27ae60);
      color: white;
      border: none;
      padding: 14px 32px;
      font-size: 1.1rem;
      font-weight: 600;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 12px rgba(46, 204, 113, 0.3);
    }

    .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(46, 204, 113, 0.4);
    }

    .btn:active {
      transform: translateY(0);
    }

    #masterNotebookContainer {
      display: none;
      max-width: 1200px;
      margin: 40px auto;
      background: white;
      border-radius: 14px;
      overflow: hidden;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.12);
    }

    #masterNotebookHeader {
      background: linear-gradient(135deg, #9b59b6, #8e44ad);
      color: white;
      padding: 20px;
      font-size: 1.6rem;
      font-weight: 700;
      text-align: center;
    }

    #masterNotebook {
      padding: 24px;
      min-height: 300px;
      font-size: 1.05rem;
      line-height: 1.7;
      overflow-wrap: break-word;
      white-space: pre-wrap;
    }

    .section-title {
      color: #2c3e50;
      margin: 24px 0 12px;
      padding-bottom: 8px;
      border-bottom: 2px solid #3498db;
      font-size: 1.4rem;
    }

    .note-title {
      display: inline-block;
      background: #f1c40f;
      color: #2c3e50;
      padding: 2px 8px;
      border-radius: 4px;
      font-weight: 600;
      margin: 6px 0;
    }

    footer {
      text-align: center;
      margin-top: 40px;
      color: #7f8c8d;
      font-size: 0.9rem;
    }

    @media (max-width: 768px) {
      .blocks-container {
        grid-template-columns: 1fr;
      }
      .notebooks-grid {
        grid-template-columns: repeat(2, 1fr);
      }
      .btn {
        width: 90%;
      }
    }

    @media (max-width: 480px) {
      .notebooks-grid {
        grid-template-columns: 1fr;
      }
      #masterNotebook {
        padding: 16px;
      }
    }
  </style>
</head>
<body>
  <h1>üìö –°–æ–≤–º–µ—Å—Ç–Ω—ã–µ –±–ª–æ–∫–Ω–æ—Ç—ã –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ –≥–æ–¥</h1>
  <div class="blocks-container" id="blocksContainer"></div>

  <div class="controls">
    <button class="btn" id="compileBtn">üìù –°–æ–±—Ä–∞—Ç—å –≤—Å—ë –≤ –≥–ª–∞–≤–Ω—ã–π –±–ª–æ–∫–Ω–æ—Ç</button>
  </div>

  <div id="masterNotebookContainer">
    <div id="masterNotebookHeader">–ì–ª–∞–≤–Ω—ã–π –±–ª–æ–∫–Ω–æ—Ç: –ò—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á—ë—Ç –ø—Ä–æ–µ–∫—Ç–∞</div>
    <div id="masterNotebook"></div>
  </div>

  <footer>
    ‚ö†Ô∏è –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏ (–¥–æ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã).<br>
    –î–ª—è —Å–æ–≤–º–µ—Å—Ç–Ω–æ–≥–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è —Å–µ—Ä–≤–µ—Ä —Å WebSocket.
  </footer>

  <script>
    const blocks = [
      { id: 'q1', title: 'Q1: –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∑–∞–ø—É—Å–∫' },
      { id: 'q2', title: 'Q2: –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∏ –∏—Ç–µ—Ä–∞—Ü–∏–∏' },
      { id: 'q3', title: 'Q3: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è' },
      { id: 'q4', title: 'Q4: –†–µ–ª–∏–∑ –∏ –∞–Ω–∞–ª–∏–∑' }
    ];

    const notebookData = {};

    function init() {
      const container = document.getElementById('blocksContainer');
      
      blocks.forEach(block => {
        const blockEl = document.createElement('div');
        blockEl.className = 'notebook-block';
        
        blockEl.innerHTML = `
          <div class="block-header">${block.title}</div>
          <div class="notebooks-grid" id="grid-${block.id}"></div>
        `;
        
        container.appendChild(blockEl);
        
        const grid = document.getElementById(`grid-${block.id}`);
        
        for (let i = 1; i <= 20; i++) {
          const notebookId = `${block.id}-note-${i}`;
          notebookData[notebookId] = '';
          
          const notebookEl = document.createElement('div');
          notebookEl.className = 'notebook notebook-placeholder';
          notebookEl.contentEditable = true;
          notebookEl.dataset.placeholder = `–ë–ª–æ–∫–Ω–æ—Ç ${i} ‚Äî –Ω–∞—á–Ω–∏—Ç–µ –ø–∏—Å–∞—Ç—å...`;
          notebookEl.id = notebookId;
          
          notebookEl.addEventListener('input', function() {
            notebookData[notebookId] = this.innerHTML;
            if (this.innerHTML.trim() !== '') {
              this.classList.remove('notebook-placeholder');
            } else {
              this.classList.add('notebook-placeholder');
            }
          });
          
          grid.appendChild(notebookEl);
        }
      });

      // –ö–Ω–æ–ø–∫–∞ —Å–±–æ—Ä–∫–∏
      document.getElementById('compileBtn').addEventListener('click', compileMasterNotebook);
    }

    function compileMasterNotebook() {
      let masterContent = '';
      
      blocks.forEach(block => {
        let blockContent = '';
        
        for (let i = 1; i <= 20; i++) {
          const notebookId = `${block.id}-note-${i}`;
          const content = notebookData[notebookId] || '';
          // –û—á–∏—â–∞–µ–º HTML –æ—Ç —Ç–µ–≥–æ–≤ –¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è (—Å–æ—Ö—Ä–∞–Ω—è—è –ø–µ—Ä–µ–Ω–æ—Å—ã)
          const text = content
            .replace(/<br\s*\/?>/gi, '\n')
            .replace(/<\/?[^>]+(>|$)/g, '')
            .trim();
          
          if (text) {
            blockContent += `\n  üìù <span class="note-title">–ë–ª–æ–∫–Ω–æ—Ç ${i}</span>\n${text}\n`;
          }
        }
        
        if (blockContent) {
          masterContent += `\n<h2 class="section-title">${block.title}</h2>\n${blockContent}`;
        }
      });
      
      if (masterContent) {
        document.getElementById('masterNotebook').innerHTML = masterContent;
        document.getElementById('masterNotebookContainer').style.display = 'block';
        
        // –ü—Ä–æ–∫—Ä—É—Ç–∫–∞ –∫ –≥–ª–∞–≤–Ω–æ–º—É –±–ª–æ–∫–Ω–æ—Ç—É
        document.getElementById('masterNotebookContainer').scrollIntoView({ behavior: 'smooth' });
      } else {
        alert('–í—Å–µ –±–ª–æ–∫–Ω–æ—Ç—ã –ø—É—Å—Ç—ã. –ù–∞–ø–∏—à–∏—Ç–µ —á—Ç–æ-–Ω–∏–±—É–¥—å –≤ –ª—é–±–æ–º –±–ª–æ–∫–Ω–æ—Ç–µ –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.');
      }
    }

    document.addEventListener('DOMContentLoaded', init);
  </script>
</body>
</html>

